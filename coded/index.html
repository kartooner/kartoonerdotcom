<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coded - A lightweight code playground for quick prototyping">
    <title>Coded - Code Playground</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet">

    <!-- Coded styles -->
    <link href="coded.css" rel="stylesheet">
</head>
<body>
    <!-- Template Selector Screen -->
    <div class="template-selector" id="templateSelector">
        <div class="template-selector-content">
            <h1 class="template-selector-title">&lt;/Coded&gt;</h1>
            <p class="template-selector-subtitle">Choose a starter template or create from scratch</p>

            <div class="template-grid">
                <button class="template-card" data-template="blank">
                    <div class="template-icon">üìù</div>
                    <h3 class="template-name">Blank canvas</h3>
                    <p class="template-description">Start from scratch with empty editors</p>
                </button>

                <button class="template-card" data-template="html-shell">
                    <div class="template-icon">üèóÔ∏è</div>
                    <h3 class="template-name">HTML shell</h3>
                    <p class="template-description">Basic HTML structure with CSS starter</p>
                </button>

                <button class="template-card" data-template="simple-table">
                    <div class="template-icon">üìä</div>
                    <h3 class="template-name">Simple table</h3>
                    <p class="template-description">Styled data table layout</p>
                </button>

                <button class="template-card" data-template="item-list">
                    <div class="template-icon">üìã</div>
                    <h3 class="template-name">Item list</h3>
                    <p class="template-description">Collection of items with cards</p>
                </button>

                <button class="template-card" data-template="editable-grid">
                    <div class="template-icon">‚ö°</div>
                    <h3 class="template-name">Editable grid</h3>
                    <p class="template-description">Interactive grid with edit functionality</p>
                </button>
            </div>
        </div>
    </div>

    <!-- Share Mode Banner -->
    <div class="share-mode-banner" id="shareModeBanner" role="status" aria-live="polite">
        <div class="share-mode-info">
            <span style="font-size: 1.2rem;">üîó</span>
            <span><strong>Viewing shared code</strong> ‚Äî Make your own edits and share them!</span>
        </div>
        <div class="share-mode-actions">
            <button class="share-mode-button primary" id="updateShareBtn">Update Share Link</button>
            <button class="share-mode-button secondary" id="startFreshBtn">Start Fresh</button>
        </div>
    </div>

    <header>
        <h1>&lt;/Coded&gt;</h1>
        <div class="header-actions">
            <div class="auto-run-toggle">
                <input type="checkbox" id="autoRunToggle" />
                <label for="autoRunToggle">Auto-run</label>
            </div>
            <button class="run-button" id="runBtn">Run Code</button>
            <div class="more-options-dropdown">
                <button class="more-options-button" id="moreOptionsBtn" aria-label="More options">
                    ‚ãØ
                </button>
                <div class="more-options-menu" id="moreOptionsMenu">
                    <div class="more-option-item" id="settingsBtn">
                        ‚öôÔ∏è Settings
                    </div>
                    <div class="more-option-item" id="saveSnippetMenuBtn">
                        üíæ Save Snippet
                    </div>
                    <div class="more-option-item" id="snippetsMenuBtn">
                        üìÇ Load Snippet
                    </div>
                    <div class="more-option-item" id="shareBtn">
                        üîó Share Link
                    </div>
                    <div class="more-option-item" id="exportBtn">
                        üì• Export HTML
                    </div>
                    <div class="more-option-item" id="clearBtn">
                        üóëÔ∏è Clear All
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Snippets Modal -->
    <div class="snippets-menu" id="snippetsMenu" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; display: none;">
        <div class="snippets-menu-header">
            <span>Load Snippet</span>
            <span style="cursor: pointer; opacity: 0.7;" id="closeSnippetsBtn">‚úï</span>
        </div>
        <div id="snippetsList"></div>
    </div>

    <!-- Libraries Modal -->
    <div class="snippets-menu" id="librariesMenu" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; display: none; max-height: 600px;">
        <div class="snippets-menu-header">
            <span>Add External Libraries</span>
            <span style="cursor: pointer; opacity: 0.7;" id="closeLibrariesBtn">‚úï</span>
        </div>
        <div style="padding: 1rem; border-bottom: 1px solid var(--editor-border);">
            <div style="margin-bottom: 1rem;">
                <strong style="display: block; margin-bottom: 0.5rem; color: var(--accent-color);">Popular Libraries</strong>
                <div id="popularLibraries"></div>
            </div>
            <div>
                <strong style="display: block; margin-bottom: 0.5rem; color: var(--accent-color);">Custom CDN</strong>
                <input type="text" id="customCdnInput" placeholder="Paste CDN URL..." style="width: 100%; padding: 0.5rem; background: var(--bg-color); border: 1px solid var(--editor-border); border-radius: 4px; color: var(--text-color); font-family: var(--font-main); font-size: 0.9rem; margin-bottom: 0.5rem;">
                <button id="addCustomCdnBtn" style="width: 100%; padding: 0.5rem; background: var(--accent-color); color: var(--bg-color); border: none; border-radius: 4px; cursor: pointer; font-weight: 500;">Add Custom CDN</button>
            </div>
        </div>
        <div style="padding: 1rem;">
            <strong style="display: block; margin-bottom: 0.5rem; color: var(--accent-color);">Added Libraries</strong>
            <div id="addedLibrariesList" style="max-height: 200px; overflow-y: auto;"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="snippets-menu" id="settingsMenu" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 2000; display: none; max-width: 500px;">
        <div class="snippets-menu-header">
            <span>Settings</span>
            <span style="cursor: pointer; opacity: 0.7;" id="closeSettingsBtn">‚úï</span>
        </div>
        <div style="padding: 1.5rem;">
            <!-- Font Size -->
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--accent-color); font-weight: 500;">Editor Font Size</label>
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <input type="range" id="fontSizeSlider" min="12" max="20" value="14" step="1" style="flex: 1; accent-color: var(--accent-color);">
                    <span id="fontSizeValue" style="color: var(--secondary-color); min-width: 3rem; text-align: right;">14px</span>
                </div>
            </div>

            <!-- Layout Toggle -->
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--accent-color); font-weight: 500;">Editor Layout</label>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="layout-toggle-btn active" id="layoutHorizontalBtn" style="flex: 1; padding: 0.75rem; background: var(--accent-color); color: var(--bg-color); border: 2px solid var(--accent-color); border-radius: 4px; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                        Horizontal
                    </button>
                    <button class="layout-toggle-btn" id="layoutVerticalBtn" style="flex: 1; padding: 0.75rem; background: none; color: var(--secondary-color); border: 2px solid var(--editor-border); border-radius: 4px; cursor: pointer; font-weight: 500; transition: all 0.2s;">
                        Vertical
                    </button>
                </div>
            </div>

            <!-- Theme (future) -->
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--accent-color); font-weight: 500;">Theme</label>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="theme-toggle-btn active" style="flex: 1; padding: 0.75rem; background: var(--accent-color); color: var(--bg-color); border: 2px solid var(--accent-color); border-radius: 4px; cursor: pointer; font-weight: 500;">
                        Dark
                    </button>
                    <button class="theme-toggle-btn" disabled style="flex: 1; padding: 0.75rem; background: none; color: var(--secondary-color); border: 2px solid var(--editor-border); border-radius: 4px; opacity: 0.5; font-weight: 500;">
                        Light (Soon)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="snippetsOverlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 1999;"></div>

    <!-- Find/Replace Panel -->
    <div id="findReplacePanel" style="display: none; position: fixed; top: 80px; right: 20px; background: var(--editor-bg); border: 2px solid var(--editor-border); border-radius: 8px; padding: 1rem; z-index: 3000; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5); min-width: 350px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
            <span style="font-weight: 500; color: var(--accent-color);">Find & Replace</span>
            <span id="closeFindReplaceBtn" style="cursor: pointer; opacity: 0.7; font-size: 1.2rem; color: var(--secondary-color);">‚úï</span>
        </div>

        <div style="margin-bottom: 0.5rem;">
            <input type="text" id="findInput" placeholder="Find..." style="width: 100%; padding: 0.5rem; background: var(--bg-color); border: 1px solid var(--editor-border); border-radius: 4px; color: var(--text-color); font-family: var(--font-main); font-size: 0.9rem;">
        </div>

        <div style="margin-bottom: 0.75rem;">
            <input type="text" id="replaceInput" placeholder="Replace with..." style="width: 100%; padding: 0.5rem; background: var(--bg-color); border: 1px solid var(--editor-border); border-radius: 4px; color: var(--text-color); font-family: var(--font-main); font-size: 0.9rem;">
        </div>

        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <button id="findPrevBtn" style="flex: 1; min-width: 70px; padding: 0.5rem; background: none; border: 1px solid var(--editor-border); color: var(--secondary-color); border-radius: 4px; cursor: pointer; font-size: 0.85rem;">‚Üê Prev</button>
            <button id="findNextBtn" style="flex: 1; min-width: 70px; padding: 0.5rem; background: var(--accent-color); border: 1px solid var(--accent-color); color: var(--bg-color); border-radius: 4px; cursor: pointer; font-weight: 500; font-size: 0.85rem;">Next ‚Üí</button>
            <button id="replaceBtn" style="flex: 1; min-width: 70px; padding: 0.5rem; background: none; border: 1px solid var(--editor-border); color: var(--secondary-color); border-radius: 4px; cursor: pointer; font-size: 0.85rem;">Replace</button>
            <button id="replaceAllBtn" style="flex: 1; min-width: 70px; padding: 0.5rem; background: none; border: 1px solid var(--editor-border); color: var(--secondary-color); border-radius: 4px; cursor: pointer; font-size: 0.85rem;">All</button>
        </div>

        <div style="margin-top: 0.75rem; font-size: 0.8rem; color: var(--secondary-color); opacity: 0.7;">
            <span id="findResultsText">Press Enter or click Next</span>
        </div>
    </div>

    <!-- Learning Panel -->
    <div class="learn-panel" id="learnPanel">
        <div class="learn-panel-header">
            <h3>üí° Learning Guide</h3>
            <button class="learn-panel-close" id="learnPanelClose" aria-label="Close learning panel">‚úï</button>
        </div>
        <div class="learn-panel-content" id="learnPanelContent">
            <div class="learn-welcome">
                <p>Hover over highlighted code to see quick tips. Click to learn more!</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Editors Section -->
        <div class="editors">
            <div class="editor-panel">
                <div class="editor-header">
                    <span>HTML</span>
                    <button class="panel-settings-button" id="htmlSettingsBtn" aria-label="HTML panel settings">‚öô</button>
                    <div class="panel-settings-menu" id="htmlSettingsMenu">
                        <div class="more-option-item" id="htmlLearnBtn">
                            üí° Learn Mode
                        </div>
                        <div class="more-option-item" id="htmlLibrariesBtn">
                            üìö Add Libraries
                        </div>
                        <div class="more-option-item" id="htmlWrapToggle">
                            ‚Ü©Ô∏è Word Wrap: <span id="htmlWrapStatus">Off</span>
                        </div>
                    </div>
                </div>
                <div class="editor-container">
                    <div class="line-numbers" id="htmlLineNumbers">1</div>
                    <div class="editor-content">
                        <div class="editor-highlight" id="htmlHighlight"></div>
                        <textarea
                            class="editor"
                            id="htmlEditor"
                            placeholder="<!-- Enter your HTML here -->"
                            spellcheck="false"
                            aria-label="HTML code editor. Press Tab to indent, Shift+Tab to outdent, Escape to exit and restore normal tab navigation."
                        ></textarea>
                    </div>
                </div>
            </div>
            <div class="editor-panel">
                <div class="editor-header">
                    <span>CSS</span>
                    <button class="panel-settings-button" id="cssSettingsBtn" aria-label="CSS panel settings">‚öô</button>
                    <div class="panel-settings-menu" id="cssSettingsMenu">
                        <div class="more-option-item" id="cssLearnBtn">
                            üí° Learn Mode
                        </div>
                        <div class="more-option-item" id="cssLibrariesBtn">
                            üìö Add Libraries
                        </div>
                        <div class="more-option-item" id="cssWrapToggle">
                            ‚Ü©Ô∏è Word Wrap: <span id="cssWrapStatus">Off</span>
                        </div>
                        <div class="more-option-item" id="cssResetBtn">
                            üîÑ CSS Reset: <span id="cssResetStatus">None</span>
                        </div>
                    </div>
                </div>
                <div class="editor-container">
                    <div class="line-numbers" id="cssLineNumbers">1</div>
                    <div class="editor-content">
                        <div class="editor-highlight" id="cssHighlight"></div>
                        <textarea
                            class="editor"
                            id="cssEditor"
                            placeholder="/* Enter your CSS here */"
                            spellcheck="false"
                            aria-label="CSS code editor. Press Tab to indent, Shift+Tab to outdent, Escape to exit and restore normal tab navigation."
                        ></textarea>
                    </div>
                </div>
            </div>
            <div class="editor-panel">
                <div class="editor-header">
                    <span>JavaScript</span>
                    <button class="panel-settings-button" id="jsSettingsBtn" aria-label="JavaScript panel settings">‚öô</button>
                    <div class="panel-settings-menu" id="jsSettingsMenu">
                        <div class="more-option-item" id="jsLearnBtn">
                            üí° Learn Mode
                        </div>
                        <div class="more-option-item" id="jsLibrariesBtn">
                            üìö Add Libraries
                        </div>
                        <div class="more-option-item" id="jsWrapToggle">
                            ‚Ü©Ô∏è Word Wrap: <span id="jsWrapStatus">Off</span>
                        </div>
                    </div>
                </div>
                <div class="editor-container">
                    <div class="line-numbers" id="jsLineNumbers">1</div>
                    <div class="editor-content">
                        <div class="editor-highlight" id="jsHighlight"></div>
                        <textarea
                            class="editor"
                            id="jsEditor"
                            placeholder="// Enter your JavaScript here"
                            spellcheck="false"
                            aria-label="JavaScript code editor. Press Tab to indent, Shift+Tab to outdent, Escape to exit and restore normal tab navigation."
                        ></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resizer -->
        <div class="resizer" id="resizer"></div>

        <!-- Preview Section -->
        <div class="preview-section">
            <div class="preview-header">
                <span>Preview</span>
                <div class="preview-actions">
                    <button class="panel-settings-button" id="toggleConsoleBtn" title="Toggle Console">
                        Console
                    </button>
                </div>
            </div>
            <div class="preview-container">
                <iframe id="preview" sandbox="allow-scripts allow-modals allow-same-origin"></iframe>
                <div class="console-panel" id="consolePanel">
                    <div class="console-header">
                        <span>Console</span>
                        <button class="console-clear" id="clearConsoleBtn" title="Clear console">Clear</button>
                    </div>
                    <div class="console-output" id="consoleOutput"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>

    <!-- Coded app -->
    <script src="coded.js"></script>
</body>
</html>
