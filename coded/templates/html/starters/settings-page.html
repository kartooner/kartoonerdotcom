<!-- Settings page with inline editing -->
<div class="settings-container" role="main">
  <header class="settings-header">
    <h1>Account settings</h1>
  </header>

  <div class="settings-layout">
    <!-- Sidebar navigation (desktop) -->
    <nav class="settings-nav" aria-label="Settings sections">
      <ul role="list">
        <li><a href="#general" class="active" aria-current="page">General</a></li>
        <li><a href="#profile">Profile</a></li>
        <li><a href="#notifications">Notifications</a></li>
        <li><a href="#security">Security</a></li>
      </ul>
    </nav>

    <!-- Mobile dropdown navigation -->
    <div class="settings-nav-mobile">
      <label for="section-select" class="sr-only">Jump to section</label>
      <select id="section-select" class="section-select">
        <option value="general" selected>General</option>
        <option value="profile">Profile</option>
        <option value="notifications">Notifications</option>
        <option value="security">Security</option>
      </select>
    </div>

    <!-- Main content area -->
    <main class="settings-main">
      <!-- General section -->
      <section id="general" class="settings-section" data-section="general">
        <div class="section-header">
          <div>
            <h2>General</h2>
            <p>Basic account information and preferences</p>
          </div>
          <button type="button" class="btn-edit" aria-label="Edit general settings">Edit</button>
        </div>

        <!-- View mode (read-only) -->
        <div class="section-content view-mode">
          <dl class="settings-list">
            <div class="setting-row">
              <dt>Full name</dt>
              <dd data-field="fullname">Alan Grant</dd>
            </div>
            <div class="setting-row">
              <dt>Email address</dt>
              <dd data-field="email">a.grant@montana.edu</dd>
            </div>
            <div class="setting-row">
              <dt>Language</dt>
              <dd data-field="language">English (US)</dd>
            </div>
            <div class="setting-row">
              <dt>Timezone</dt>
              <dd data-field="timezone">Mountain Time (MT)</dd>
            </div>
          </dl>
        </div>

        <!-- Edit mode (inputs) -->
        <form class="section-content edit-mode hidden" aria-label="Edit general settings">
          <div class="form-group">
            <label for="general-fullname">Full name</label>
            <input type="text" id="general-fullname" name="fullname" value="Alan Grant">
          </div>
          <div class="form-group">
            <label for="general-email">Email address</label>
            <input type="email" id="general-email" name="email" value="a.grant@montana.edu">
          </div>
          <div class="form-group">
            <label for="general-language">Language</label>
            <select id="general-language" name="language">
              <option value="en-US" selected>English (US)</option>
              <option value="en-GB">English (UK)</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
            </select>
          </div>
          <div class="form-group">
            <label for="general-timezone">Timezone</label>
            <select id="general-timezone" name="timezone">
              <option value="PT">Pacific Time (PT)</option>
              <option value="MT" selected>Mountain Time (MT)</option>
              <option value="CT">Central Time (CT)</option>
              <option value="ET">Eastern Time (ET)</option>
            </select>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-cancel">Cancel</button>
          </div>
        </form>
      </section>

      <!-- Profile section -->
      <section id="profile" class="settings-section" data-section="profile">
        <div class="section-header">
          <div>
            <h2>Profile</h2>
            <p>Your public profile information</p>
          </div>
          <button type="button" class="btn-edit" aria-label="Edit profile settings">Edit</button>
        </div>

        <div class="section-content view-mode">
          <dl class="settings-list">
            <div class="setting-row">
              <dt>Display name</dt>
              <dd data-field="displayname">Dr. Alan Grant</dd>
            </div>
            <div class="setting-row">
              <dt>Title</dt>
              <dd data-field="title">Paleontologist</dd>
            </div>
            <div class="setting-row">
              <dt>Bio</dt>
              <dd data-field="bio">Leading researcher in dinosaur behavior and paleobiology. Author of "Dinosaur Detectives" and consultant for paleontological expeditions.</dd>
            </div>
            <div class="setting-row">
              <dt>Location</dt>
              <dd data-field="location">Montana, USA</dd>
            </div>
          </dl>
        </div>

        <form class="section-content edit-mode hidden" aria-label="Edit profile settings">
          <div class="form-group">
            <label for="profile-displayname">Display name</label>
            <input type="text" id="profile-displayname" name="displayname" value="Dr. Alan Grant">
          </div>
          <div class="form-group">
            <label for="profile-title">Title</label>
            <input type="text" id="profile-title" name="title" value="Paleontologist">
          </div>
          <div class="form-group">
            <label for="profile-bio">Bio</label>
            <textarea id="profile-bio" name="bio" rows="3">Leading researcher in dinosaur behavior and paleobiology. Author of "Dinosaur Detectives" and consultant for paleontological expeditions.</textarea>
          </div>
          <div class="form-group">
            <label for="profile-location">Location</label>
            <input type="text" id="profile-location" name="location" value="Montana, USA">
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-cancel">Cancel</button>
          </div>
        </form>
      </section>

      <!-- Notifications section -->
      <section id="notifications" class="settings-section" data-section="notifications">
        <div class="section-header">
          <div>
            <h2>Notifications</h2>
            <p>How you receive updates and alerts</p>
          </div>
          <button type="button" class="btn-edit" aria-label="Edit notification settings">Edit</button>
        </div>

        <div class="section-content view-mode">
          <dl class="settings-list">
            <div class="setting-row">
              <dt>Email notifications</dt>
              <dd data-field="email-notifs">Enabled</dd>
            </div>
            <div class="setting-row">
              <dt>Push notifications</dt>
              <dd data-field="push-notifs">Disabled</dd>
            </div>
            <div class="setting-row">
              <dt>Weekly digest</dt>
              <dd data-field="digest">Enabled</dd>
            </div>
            <div class="setting-row">
              <dt>Marketing emails</dt>
              <dd data-field="marketing">Disabled</dd>
            </div>
          </dl>
        </div>

        <form class="section-content edit-mode hidden" aria-label="Edit notification settings">
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" name="email-notifs" checked>
              <span>Email notifications</span>
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" name="push-notifs">
              <span>Push notifications</span>
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" name="digest" checked>
              <span>Weekly digest</span>
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" name="marketing">
              <span>Marketing emails</span>
            </label>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-cancel">Cancel</button>
          </div>
        </form>
      </section>

      <!-- Security section -->
      <section id="security" class="settings-section" data-section="security">
        <div class="section-header">
          <div>
            <h2>Security</h2>
            <p>Password and account protection</p>
          </div>
          <button type="button" class="btn-edit" aria-label="Edit security settings">Edit</button>
        </div>

        <div class="section-content view-mode">
          <dl class="settings-list">
            <div class="setting-row">
              <dt>Password</dt>
              <dd data-field="password">Last changed 45 days ago</dd>
            </div>
            <div class="setting-row">
              <dt>Two-factor auth</dt>
              <dd data-field="twofa">Enabled (Authenticator app)</dd>
            </div>
            <div class="setting-row">
              <dt>Active sessions</dt>
              <dd data-field="sessions">2 devices</dd>
            </div>
          </dl>
        </div>

        <form class="section-content edit-mode hidden" aria-label="Edit security settings">
          <div class="form-group">
            <label for="security-current-password">Current password</label>
            <input type="password" id="security-current-password" name="current-password" placeholder="Enter current password">
          </div>
          <div class="form-group">
            <label for="security-new-password">New password</label>
            <input type="password" id="security-new-password" name="new-password" placeholder="Enter new password">
          </div>
          <div class="form-group">
            <label for="security-confirm-password">Confirm new password</label>
            <input type="password" id="security-confirm-password" name="confirm-password" placeholder="Confirm new password">
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-cancel">Cancel</button>
          </div>
        </form>
      </section>
    </main>
  </div>
</div>

<style>
/* Import Arimo font */
@import url('https://fonts.googleapis.com/css2?family=Arimo:wght@400;500;600;700&display=swap');

/* Screen reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;
}

/* Base reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Arimo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  color: #1e293b;
  background: #f1f5f9;
  min-height: 100vh;
}

/* Container */
.settings-container {
  max-width: 1100px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
}

/* Header */
.settings-header {
  margin-bottom: 2rem;
}

.settings-header h1 {
  font-size: 2rem;
  font-weight: 600;
  color: #0f172a;
}

/* Two-column layout */
.settings-layout {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: 2rem;
  align-items: start;
}

/* Sidebar navigation */
.settings-nav {
  background: white;
  border-radius: 12px;
  padding: 0.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
  position: sticky;
  top: 1rem;
}

.settings-nav ul {
  list-style: none;
}

.settings-nav a {
  display: block;
  padding: 0.75rem 1rem;
  color: #475569;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 500;
  font-size: 0.9375rem;
  transition: all 0.15s ease;
}

.settings-nav a:hover {
  background: #f8fafc;
  color: #1e293b;
}

.settings-nav a.active {
  background: #3498db;
  color: white;
}

/* Mobile dropdown navigation (hidden on desktop) */
.settings-nav-mobile {
  display: none;
}

.section-select {
  width: 100%;
  padding: 0.875rem 2.5rem 0.875rem 1rem;
  font-size: 1rem;
  font-weight: 500;
  font-family: inherit;
  background: white;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23475569' d='M4.427 6.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 6H4.604a.25.25 0 00-.177.427z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  border: 1.5px solid #e2e8f0;
  border-radius: 8px;
  color: #1e293b;
  cursor: pointer;
  appearance: none;
  -webkit-appearance: none;
}

.section-select:focus {
  outline: none;
  border-color: #3498db;
}

/* Main content */
.settings-main {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* Section card */
.settings-section {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

/* Section header with edit button */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid #e2e8f0;
}

.section-header h2 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #0f172a;
  margin-bottom: 0.25rem;
}

.section-header p {
  font-size: 0.875rem;
  color: #64748b;
}

/* Edit button */
.btn-edit {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  background: white;
  color: #3498db;
  border: 1.5px solid #3498db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-edit:hover {
  background: #3498db;
  color: white;
}

/* Settings list (view mode) */
.settings-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.setting-row {
  display: grid;
  grid-template-columns: 180px 1fr;
  gap: 1rem;
  padding: 0.75rem 0;
  border-bottom: 1px solid #f1f5f9;
}

.setting-row:last-child {
  border-bottom: none;
}

.setting-row dt {
  font-size: 0.875rem;
  font-weight: 500;
  color: #64748b;
}

.setting-row dd {
  font-size: 0.9375rem;
  color: #1e293b;
}

/* Form styles (edit mode) */
.form-group {
  margin-bottom: 1.25rem;
}

.form-group label {
  display: block;
  font-size: 0.875rem;
  font-weight: 500;
  color: #475569;
  margin-bottom: 0.5rem;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 0.625rem 0.875rem;
  font-size: 0.9375rem;
  font-family: inherit;
  border: 1.5px solid #e2e8f0;
  border-radius: 6px;
  background: white;
  color: #1e293b;
  transition: border-color 0.15s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #3498db;
}

.form-group textarea {
  resize: vertical;
  min-height: 80px;
}

.form-group select {
  cursor: pointer;
}

/* Checkbox styling */
.checkbox-group {
  margin-bottom: 0.75rem;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
  padding: 0.5rem 0;
}

.checkbox-label input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: #3498db;
  cursor: pointer;
}

.checkbox-label span {
  font-size: 0.9375rem;
  color: #1e293b;
}

/* Form action buttons */
.form-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid #e2e8f0;
}

.btn {
  padding: 0.625rem 1.25rem;
  font-size: 0.9375rem;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: inherit;
}

.btn-primary {
  background: #3498db;
  color: white;
  border: none;
}

.btn-primary:hover {
  background: #2980b9;
}

.btn-cancel {
  background: white;
  color: #64748b;
  border: 1.5px solid #e2e8f0;
}

.btn-cancel:hover {
  background: #f8fafc;
  border-color: #cbd5e1;
}

/* Hide/show toggle */
.hidden {
  display: none;
}

/* Editing state indicator */
.settings-section.editing .section-header {
  border-bottom-color: #3498db;
}

.settings-section.editing .btn-edit {
  display: none;
}

/* Responsive */
@media (max-width: 768px) {
  .settings-layout {
    grid-template-columns: 1fr;
  }

  /* Hide desktop nav, show mobile dropdown */
  .settings-nav {
    display: none;
  }

  .settings-nav-mobile {
    display: block;
    margin-bottom: 1rem;
  }

  .setting-row {
    grid-template-columns: 1fr;
    gap: 0.25rem;
  }

  .form-actions {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }
}
</style>

<script>
// Toggle between view and edit mode for each section
document.querySelectorAll('.settings-section').forEach(section => {
  const editBtn = section.querySelector('.btn-edit');
  const viewMode = section.querySelector('.view-mode');
  const editMode = section.querySelector('.edit-mode');
  const cancelBtn = section.querySelector('.btn-cancel');
  const form = section.querySelector('form');

  // Enter edit mode
  editBtn?.addEventListener('click', () => {
    viewMode.classList.add('hidden');
    editMode.classList.remove('hidden');
    section.classList.add('editing');
    editMode.querySelector('input, select, textarea')?.focus();
  });

  // Cancel editing
  cancelBtn?.addEventListener('click', () => {
    editMode.classList.add('hidden');
    viewMode.classList.remove('hidden');
    section.classList.remove('editing');
    form?.reset();
  });

  // Save changes (form submit)
  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    const formData = new FormData(form);

    // Update view mode values from form data
    formData.forEach((value, key) => {
      const dd = viewMode.querySelector(`[data-field="${key}"]`);
      if (dd) {
        // Handle checkbox values
        const checkbox = form.querySelector(`input[name="${key}"][type="checkbox"]`);
        if (checkbox) {
          dd.textContent = checkbox.checked ? 'Enabled' : 'Disabled';
        } else {
          // Handle select display text
          const select = form.querySelector(`select[name="${key}"]`);
          if (select) {
            dd.textContent = select.options[select.selectedIndex].text;
          } else {
            dd.textContent = value;
          }
        }
      }
    });

    // Handle unchecked checkboxes (not in FormData)
    form.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      const dd = viewMode.querySelector(`[data-field="${checkbox.name}"]`);
      if (dd) {
        dd.textContent = checkbox.checked ? 'Enabled' : 'Disabled';
      }
    });

    // Return to view mode
    editMode.classList.add('hidden');
    viewMode.classList.remove('hidden');
    section.classList.remove('editing');
  });
});

// Sidebar navigation highlighting
document.querySelectorAll('.settings-nav a').forEach(link => {
  link.addEventListener('click', function(e) {
    document.querySelectorAll('.settings-nav a').forEach(l => {
      l.classList.remove('active');
      l.removeAttribute('aria-current');
    });
    this.classList.add('active');
    this.setAttribute('aria-current', 'page');
  });
});

// Mobile dropdown navigation
const mobileSelect = document.getElementById('section-select');
mobileSelect?.addEventListener('change', function() {
  const targetId = this.value;
  const targetSection = document.getElementById(targetId);
  if (targetSection) {
    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    // Update desktop nav active state to stay in sync
    document.querySelectorAll('.settings-nav a').forEach(link => {
      link.classList.remove('active');
      link.removeAttribute('aria-current');
      if (link.getAttribute('href') === '#' + targetId) {
        link.classList.add('active');
        link.setAttribute('aria-current', 'page');
      }
    });
  }
});
</script>
